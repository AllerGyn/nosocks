# nosocks

Вот примитивный пример работы с веб-сокетами отдельно от HTTP.

У нас, конечно, должна быть веб-страница, содержащая JavaScript-сценарий. Т.е. она должна откуда-то взяться, и её может давать отдельный веб-сервер. Можно использовать готового клиента: https://kodaktor.ru/g/wsclient

Самое главное там - это 

```JavaScript
let socket = new WebSocket('ws://localhost:2222');
```

После создания сокета можно слушать события и отправлять сообщения:
```JavaScript
socket.onopen = () => {};
socket.onclose = () => {};
socket.onmessage = event => {};
socket.send()
```

Этот код использует встроенное примитивное API для веб-сокетов, без всяких библиотек.


Как же работает серверная часть?

```
yarn init -y
yarn ad ws
```

Там используется примитивная библиотека ws.
Код приложения см. здесь и https://kodaktor.ru/g/purews

Приложение будет обслуживать веб-сокетный порт 2222 на локалхосте.

Перейдите по адресу https://kodaktor.ru/g/wsclient в двух окнах браузера (обычном режиме и инкогнито) и убедитесь в том, что чат работает в обоих окнах.

Это происходит благодаря тому, что в открытом окне в браузере нет никаких проблем с обращением к localhost:2222 на данном компьютере. Естественно, посещение этого адреса на другом компьютере не приведёт к указанному эффекту.

Далее см. ветки step*
